Except for tax progressivity and government transfers, household behavior within the model is not a direct response to shocks, but rather a response to the macroeconomic consequences of the shock. In this section, I decompose the variance in household decisions into the different direct channels that affect household decisions. Within the framework of my estimated HANK, this analysis pinpoints the most important macroeconomic factors for different households.

\subsection{Direct Effects Decomposition}
I expand the direct-indirect decomposition for monetary policy shocks from \textcite{kaplan2018monetary} to the full set of shocks and direct household effects within my model. Household conditions depend on the union's labor supply choice $L$, wages $W$, the interest rate $R$, dividends $D$, household transfers $\eta$, the tax level $\tau^L$, and tax progressivity $\tau^P$. Therefore, I can decompose the vector $d \mathbf{C}$ representing the linearized impulse response function (IRF) for consumption as 
\[
    d \mathbf{C} = \frac{\partial \mathbf{C}}{\partial \mathbf{L}} d \mathbf{L} + \frac{\partial \mathbf{C}}{\partial \mathbf{W}} d \mathbf{W} + \frac{\partial \mathbf{C}}{\partial \mathbf{R}} d \mathbf{R} + \frac{\partial \mathbf{C}}{\partial \mathbf{D}} d \mathbf{D} + \frac{\partial \mathbf{C}}{\partial \boldsymbol{\eta}} d \boldsymbol{\eta} + \frac{\partial \mathbf{C}}{\partial \boldsymbol{\tau}^P} d \boldsymbol{\tau}^P + \frac{\partial \mathbf{C}}{\partial \boldsymbol{\tau}^L} d \boldsymbol{\tau}^L
\]
where $\frac{\partial \mathbf{C}}{\partial \mathbf{X}}$ is the direct effect of $X$ on consumption and $d \mathbf{X}$ is the IRF for $X$. For my analysis, I combine dividends and direct transfers since both are evenly distributed transfers to all households. I also combine the tax level and tax progressivity since tax level variation is almost entirely explained by changes in tax progressivity (Figure \ref{fig:agg-var-decomp}). Denoting transfers $T$ and taxes $\tau$, this means
\[
    d \mathbf{C} = \underbrace{\frac{\partial \mathbf{C}}{\partial \mathbf{L}} d \mathbf{L}}_{\text{Labor effects}} + \underbrace{\frac{\partial \mathbf{C}}{\partial \mathbf{W}} d \mathbf{W}}_{\text{Wage effects}} + \underbrace{\frac{\partial \mathbf{C}}{\partial \mathbf{R}} d \mathbf{R}}_{\text{Interest effects}} + \underbrace{\frac{\partial \mathbf{C}}{\partial \mathbf{T}} d \mathbf{T}}_{\text{Transfer effects}} + \underbrace{\frac{\partial \mathbf{C}}{\partial \boldsymbol{\tau}} d \boldsymbol{\tau}}_{\text{Tax effects}}.
\]

Then, denoting $\frac{\partial \mathbf{C}}{\partial \mathbf{X}} d \mathbf{X}$ as $d \mathbf{C}_X$, variance in consumption within the model can be explained as
\begin{align*}
    \Var\left(d \mathbf{C}\right) &= \Var\left(d \mathbf{C}_L\right) + \Var\left(d \mathbf{C}_W\right) + \Var\left(d \mathbf{C}_R\right) + \Var\left(d \mathbf{C}_T\right) + \Var\left(d \mathbf{C}_\tau\right) \\
    & \quad\quad + 2 \Cov \left(d \mathbf{C}_L, d \mathbf{C}_W\right) + 2 \Cov \left(d \mathbf{C}_L, d \mathbf{C}_R\right) + 2 \Cov \left(d \mathbf{C}_L, d \mathbf{C}_T\right) + 2 \Cov \left(d \mathbf{C}_L, d \mathbf{C}_\tau\right) \\
    & \quad\quad + 2 \Cov \left(d \mathbf{C}_W, d \mathbf{C}_R\right) + 2 \Cov \left(d \mathbf{C}_W, d \mathbf{C}_T\right) + 2 \Cov \left(d \mathbf{C}_W, d \mathbf{C}_\tau\right) \\
    & \quad\quad + 2 \Cov \left(d \mathbf{C}_R, d \mathbf{C}_T\right) + 2 \Cov \left(d \mathbf{C}_R, d \mathbf{C}_\tau\right) \\
    & \quad\quad + 2 \Cov \left(d \mathbf{C}_T, d \mathbf{C}_\tau\right).
\end{align*}
Unlike the variance decompositions in Section \ref{sec:buis-cycs}, this features covariance terms. This is because the shocks to the model decomposed in Section \ref{sec:buis-cycs} are assumed to be orthogonal to each other, while direct effects within the model are not. Positive covariance within the decomposition implies comovement between the decomposed effects that complement each other. Negative covariance implies comovement between decomposed effects that, in part, cancel each other out. Substituting in any other household variable for consumption, including the policy rules at specific states, results in an identical decomposition. 


\subsection{Decomposition Results}

I perform this decomposition on aggregates and decision rules for consumption and savings. Like in section \ref{subsec:buis-dec-rules}, I decompose decision rules at the 10th, 50th, and 90th productivity percentiles and the 0th, 50th, 90th, and 99th wealth percentiles. Appendix \ref{app:dec-rules} decomposes the IRFs for household behavior into each direct channel.

\begin{table}[t!]  % ! needs to be there to not push it to the bottom
    \centering
    \caption{Direct Effects Decomposition: Consumption}
    \include{tables/c_dir_decomp}
    \label{tab:c-dir-decomp}
\end{table}

Table \ref{tab:c-dir-decomp} presents the decomposition results for consumption. For low income households, changes in direct transfers and labor supply are extremely impactful on their consumption decisions, while for higher income households these factors, especially transfers, are unimportant. Instead, interest rates are, compared to other factors, more important for higher income households than lower and middle income households. The variance decomposition for aggregate consumption is very similar to that of middle income, middle wealth households, suggesting that median households tend to act similarly to aggregate consumption.

There are large, negative covariances for many factors affecting the consumption of low income, and to a lesser extent middle income, households. This means that the macroeconomic effects of business cycle shocks push households in conflicting ways. In contrast, higher income households have negligible negative covariances, meaning business cycle induced macroeconomic movements homogeneously push these households to either consume more or less.

\begin{table}[t!]
    \centering
    \caption{Direct Effects Decomposition: Savings}
    \include{tables/b_dir_decomp}
    \label{tab:b-dir-decomp}
\end{table}

The decomposition for household savings decisions is presented in Table \ref{tab:b-dir-decomp}. Consistent with the business cycle decomposition in Figure \ref{fig:hh-var-decomp}, low and middle income households at the 0th wealth percentile have no variance in their savings decisions. For all other households and in aggregate, the interest rate is by far the most important factor in determining household savings. Other factors, like the labor supply and taxes, are also important only to high income households. Unlike consumption, the variance components of aggregate savings are very different from that of any individual household, suggesting macroeconomic movements in aggregate savings tell us very little about any individual household.

The covariance terms between factors are very small for low and middle income households, and very large for high income ones. This is opposite what was observed affecting household consumption decisions, and suggests that the factors affecting savings decisions after each shock for low and middle income households have homogenous effects that all either push households to save more or save less. In contrast, shocks cause high income households to face diverging forces that, to some degree, cancel each other out.
